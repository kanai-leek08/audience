<!DOCTYPE html>
<html>
  <head>
    <script src="http://fb.me/react-0.13.3.js"></script>
    <script src="http://fb.me/JSXTransformer-0.13.3.js"></script>
  </head>
  <body>
    <div id="app"></div>
    <script type="text/jsx">
     var Parent = React.createClass({
       getInitialState: function () {
         return {
           textVal: "",
           persons: []
         };
       },
       setStateTextVal: function(textVal) {
         this.setState({ textVal: textVal });
       },
       setStatePersons: function(newPerson) {
         var persons = this.state.persons.concat(newPerson);
         this.setState({ persons: persons });
       },
       render: function() {
         return (
           <div>
             <PersonInput onChange={this.setStateTextVal} onSave={this.setStatePersons} />
             <Person persons={this.state.persons} />
           </div>
         );
       }
     });
     var PersonInput = React.createClass({
       _onChange: function (e) {
         this.props.onChange(e.target.value);
       },
       _onKeyDown: function (e) {
         if (e.keyCode === 13) {
           this.props.onSave(e.target.value);
           e.target.value = "";
         }
       },
       render: function() {
         return (
           <div>
             <p>入力してEnterキーを押す</p>
             <input type="text" onChange={this._onChange} onKeyDown={this._onKeyDown} />
          </div>
         )
       }
     });
     var Person = React.createClass({
       render: function() {
         var persons = this.props.persons.map(function (person) {
           return <li>{person}</li>;
         });
         return (
           <div>
             <ul>{persons}</ul>
           </div>
         );
       }
     });
     var m = React.render(<Parent />, document.getElementById('app'));
    </script>
  </body>
</html>
